config:
  target: 'https://hfgtvdx8e6.execute-api.eu-west-1.amazonaws.com'
  phases:
    - duration: 10
      arrivalRate: 10
      name: Warm up phase
    - duration: 10
      arrivalRate: 10
      rampTo: 10
      name: Ramp up phase
    - duration: 10
      arrivalRate: 30
      name: Steady state phase
    - duration: 10
      arrivalRate: 30
      rampTo: 50
      name: Spike phase
  defaults:
    headers:
      Content-Type: 'application/json'
#  plugins:
#    publish-metrics:
#      - type: cloudwatch
#        region: eu-west-1
#        namespace: continous-testing
#        dimensions:
#          - name: TeamGordon
#            value: SQA
#          - name: polynomial-regression 
#            value: checkout-svc
#    ensure: {}
#    apdex: {}
#    metrics-by-endpoint: {}
#  apdex:
#    threshold: 100
#  ensure:
#      thresholds:
#        - http.response_time.p99: 100
#        - http.response_time.p95: 75
scenarios:
  - flow:
      - post:
          url: '/dev/polynomial-regression'
          json:
            queryStringParameters:
              x: '5000, 7000, 6000, 5500, 7500, 6200, 4800, 7800, 6300, 5100, 7600, 6100, 5400, 6800, 5900, 5300, 7700, 6400, 4700, 7900, 5200, 7200, 6100, 5600, 7800, 6500, 4900, 8000, 6400, 5200, 7700, 6700, 4500, 8100, 6300, 5400, 7500, 6900, 4600, 8000, 6200, 5500, 7400, 6800, 4700, 7900, 6100, 5600'
              y: '15000, 21000, 18000, 16000, 22000, 19000, 14500, 23000, 17500, 15500, 22500, 18500, 14700, 21500, 18300, 15800, 22000, 19200, 14200, 22500, 14800, 21200, 18500, 16300, 21800, 19000, 14400, 23300, 17800, 15100, 22200, 19500, 14000, 23500, 18000, 15600, 22800, 19700, 14100, 23400, 18500, 15700, 22600, 20000, 14300, 23200, 18300, 16000'
              degree: 2
          expect:
            statusCode: 200
            json:
              coefficients: [number, number, number]
output:
  includeOnly:
    - http


